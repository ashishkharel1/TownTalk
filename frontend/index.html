<html>
<head>
    <title>nodejs is awesome!</title>
    <script src="https://code.jquery.com/jquery-3.4.1.js"
        integrity="sha256-**SIGNARURE_HERE=" crossorigin="anonymous"></script>
</head>

<body>
    <textarea id="myStory" name="myStory" rows="5" cols="100"></textarea>
    <br>
    <input type="submit" onclick="sendStory()" value="Submit">
    <br>
    <hr>
    <textarea id="result" name="result" rows="5" cols="100"></textarea>

</body>

</html>

<script>
    function sendStory() {
        var story = $('#myStory').val();
        body = {
            "story": story
        }
        fetch('http://localhost:3000/story', {
            headers: {
                'Content-Type': 'application/json'
            },
            method: 'POST',
            body: JSON.stringify(body)
        }).then(function (response) {
            return response.json();
        }).then(function (data) {
            data.forEach((d)=>{
                console.log(d.name,d.type);
                $('#result').append(d.name,'&nbsp;',d.type,'\n');
            })
            
            //console.log(formattedData);
        })
    }
</script>
